<section class="max-w-6xl mx-auto px-6 md:px-10 py-16">
  <h2 class="text-xl">{{ page.testimonials.subtitle | default: "What They Say About" }}</h2>
  <p class="font-display text-4xl md:text-5xl leading-tight">
    {{ page.testimonials.title | default: "THE SOLIMANS" }}
  </p>

  <div class="mt-8 grid md:grid-cols-3 gap-6">
    {% if page.testimonials.testimonials_list and page.testimonials.testimonials_list.size > 0 %}
      {% for t in page.testimonials.testimonials_list limit:3 %}
        <article
          data-reveal
          class="group border-2 border-slate-200/60 bg-white/70 backdrop-blur p-6 shadow-sm
                 dark:bg-white/5 dark:border-[#919b4a]
                 transition-all duration-500 ease-out
                 opacity-0 translate-y-6
                 hover:-translate-y-1 hover:shadow-xl hover:border-[#a4b35a] hover:bg-white/80 dark:hover:bg-white/10">
          <div class="text-[#919b4a] text-4xl font-extrabold transition-transform duration-300 group-hover:scale-110">“</div>
          {% if t.highlight %}
            <p class="italic mt-2 font-semibold text-slate-800 dark:text-slate-200">{{ t.highlight }}</p>
          {% endif %}
          <p class="mt-2 text-slate-600 dark:text-slate-300">{{ t.paragraph | default: "Great!" }}</p>
          <p class="mt-4 text-sm text-slate-500 dark:text-slate-400">– {{ t.name | default: "Customer" }}</p>
        </article>
      {% endfor %}
    {% else %}
      <p class="text-sm text-slate-500">Testimonials coming soon.</p>
    {% endif %}
  </div>
</section>

<script>
(function(){
  const cards = document.querySelectorAll('[data-reveal]');
  const reduce = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
  if (!cards.length) return;

  if (reduce) {
    cards.forEach(el => el.classList.remove('opacity-0','translate-y-6'));
    return;
  }

  const io = new IntersectionObserver((entries, obs) => {
    entries.forEach((e) => {
      if (e.isIntersecting) {
        e.target.classList.remove('opacity-0','translate-y-6');
        e.target.classList.add('opacity-100','translate-y-0');
        obs.unobserve(e.target);
      }
    });
  }, { threshold: 0.15, rootMargin: '0px 0px -10% 0px' });

  cards.forEach((el, i) => {
    el.style.transitionDelay = (i * 20) + 'ms'; // stagger
    io.observe(el);
  });
})();
</script>
