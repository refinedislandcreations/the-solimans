<section id="hero" class="relative w-full max-w-[1440px] place-self-center overflow-hidden md:mb-24">
  <div class="grid md:grid-cols-2 gap-0 items-stretch min-h-[calc(100vh-64px)]">

    <!-- RIGHT: image (desktop only) -->
    <div class="order-1 md:order-2 relative hidden md:block h-full">
      <img
        data-reveal-img
        src="{{ page.hero.image | default: '/images/temp-img.png' | relative_url }}"
        alt="{{ page.hero.image_alt | default: 'Hero' }}"
        class="absolute inset-0 w-full h-full object-cover opacity-0 scale-[1.06] transition-all duration-[900ms] ease-out">
      <div class="absolute inset-0 bg-black/10 md:bg-black/0 pointer-events-none"></div>
    </div>

    <!-- LEFT: text -->
    <div class="order-2 md:order-1 relative flex items-center">
      <!-- Mobile background image -->
      <div class="absolute inset-0 md:hidden">
        <img
          src="{{ page.hero.image | default: '/images/temp-img.png' | relative_url }}"
          alt="{{ page.hero.image_alt | default: 'Hero' }}"
          class="w-full h-full object-cover">
      </div>

      <!-- Text content -->
      <div class="relative w-full px-6 md:pl-10 lg:pl-20 py-20 md:py-24 
                  text-white md:text-left text-center">
        
        <!-- Mobile blur background card -->
        <div class="md:hidden mx-auto inline-block bg-black/40 backdrop-blur-md px-4 py-6">
          <h1 data-reveal class="font-display text-5xl leading-[1.1] sm:text-6xl opacity-0 translate-y-4 transition-all duration-700 ease-out">
            {{ page.hero.title | default: "THE SOLIMANS" }}
          </h1>

          <p data-reveal class="font-display text-2xl sm:text-3xl mt-3 opacity-0 translate-y-4 transition-all duration-700 ease-out">
            {{ page.hero.subtitle | default: "Fuel For Champions" }}
          </p>

          <p data-reveal class="mt-4 text-base sm:text-lg text-white/90 max-w-md mx-auto opacity-0 translate-y-4 transition-all duration-700 ease-out">
            {{ page.hero.paragraph | default: "Dietitian-designed, chef-crafted meals that make healthy eating simple and flavorful." }}
          </p>

          <div data-reveal class="mt-6 flex justify-center gap-3 opacity-0 translate-y-4 transition-all duration-700 ease-out">
            {%- assign base = page.hero.cta_url -%}
            {%- assign msg  = page.hero.whatsapp_message | uri_escape -%}
            {%- if base and msg -%}
              {%- if base contains 'text=' -%}
                {%- assign href = base | append: msg -%}
              {%- elsif base contains '?' -%}
                {%- assign href = base | append: '&text=' | append: msg -%}
              {%- else -%}
                {%- assign href = base | append: '?text=' | append: msg -%}
              {%- endif -%}
              <a href="{{ href }}" class="btn-primary hover:-translate-y-0.5 transition">
                {{ page.hero.cta_text | default: "LET’S TALK" }}
              </a>
            {%- endif -%}
          </div>
        </div>

        <!-- Desktop text (no blur card) -->
        <div class="hidden md:block">
          <h1 data-reveal class="font-display text-6xl md:text-7xl leading-[0.95] opacity-0 translate-y-4 transition-all duration-700 ease-out">
            {{ page.hero.title | default: "THE SOLIMANS" }}
          </h1>

          <p data-reveal class="font-display text-3xl md:text-4xl mt-2 opacity-0 translate-y-4 transition-all duration-700 ease-out">
            {{ page.hero.subtitle | default: "Fuel For Champions" }}
          </p>

          <p data-reveal class="mt-5 text-lg text-slate-600 dark:text-slate-300 max-w-xl opacity-0 translate-y-4 transition-all duration-700 ease-out">
            {{ page.hero.paragraph | default: "Dietitian-designed, chef-crafted meals that make healthy eating simple and flavorful." }}
          </p>

          <div data-reveal class="mt-8 flex gap-3 opacity-0 translate-y-4 transition-all duration-700 ease-out">
            <a href="{{ href }}" class="btn-primary hover:-translate-y-0.5 transition">
              {{ page.hero.cta_text | default: "LET’S TALK" }}
            </a>
          </div>
        </div>

      </div>
    </div>
  </div>
</section>

<script>
(function(){
  const reduce = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;

  // Text reveals
  const texts = document.querySelectorAll('#hero [data-reveal]');
  if (texts.length) {
    if (reduce) {
      texts.forEach(el => el.classList.remove('opacity-0','translate-y-4'));
    } else {
      const io = new IntersectionObserver((ents, obs)=>{
        ents.forEach((e)=>{
          if(e.isIntersecting){
            e.target.style.transitionDelay = (Array.from(texts).indexOf(e.target)*100)+'ms';
            e.target.classList.remove('opacity-0','translate-y-4');
            e.target.classList.add('opacity-100','translate-y-0');
            obs.unobserve(e.target);
          }
        });
      }, { threshold: 0.2 });
      texts.forEach(el => io.observe(el));
    }
  }

  // Image reveal (desktop only)
  const img = document.querySelector('#hero [data-reveal-img]');
  if (img) {
    if (reduce) {
      img.classList.remove('opacity-0'); img.style.transform = 'none';
    } else {
      const io2 = new IntersectionObserver((ents, obs)=>{
        ents.forEach(e=>{
          if(e.isIntersecting){
            img.classList.remove('opacity-0');
            img.style.transform = 'scale(1)';
            obs.unobserve(img);
          }
        });
      }, { threshold: 0.15 });
      io2.observe(img);
    }
  }
})();
</script>
